import{o as t,c as l,m as a,r as i,b as n,a as s,s as j,d as C,u as L,e as S,f as A,g as r,h as m,i as g,w as d,F as D,j as b,k as w,l as B,n as K,p as N,T as h}from"./index-8e17f000.js";import{u as U,a as _}from"./subjects-a920562c.js";var T={root:"p-card p-component",header:"p-card-header",body:"p-card-body",title:"p-card-title",subtitle:"p-card-subtitle",content:"p-card-content",footer:"p-card-footer"},F={name:"BaseCard",extends:j,css:{classes:T}},$={name:"Card",extends:F};function P(e,o,c,u,f,p){return t(),l("div",a({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"card"}),[e.$slots.header?(t(),l("div",a({key:0,class:e.cx("header")},e.ptm("header")),[i(e.$slots,"header")],16)):n("",!0),s("div",a({class:e.cx("body")},e.ptm("body")),[e.$slots.title?(t(),l("div",a({key:0,class:e.cx("title")},e.ptm("title")),[i(e.$slots,"title")],16)):n("",!0),e.$slots.subtitle?(t(),l("div",a({key:1,class:e.cx("subtitle")},e.ptm("subtitle")),[i(e.$slots,"subtitle")],16)):n("",!0),s("div",a({class:e.cx("content")},e.ptm("content")),[i(e.$slots,"content")],16),e.$slots.footer?(t(),l("div",a({key:2,class:e.cx("footer")},e.ptm("footer")),[i(e.$slots,"footer")],16)):n("",!0)],16)],16)}$.render=P;const q=s("div",null,[s("span",null,"Loading User Data")],-1),E=s("div",null,[s("span",null,"Loading Assignments")],-1),I=s("div",null,[s("span",null,"Loading Subjects")],-1),M=s("img",{alt:"logo",src:N},null,-1),z=C({__name:"LoginView",setup(e){const o=L(),c=U(),u=_(),f=S(),p=A({get(){return o.apiKey},set(v){o.updateApiKey(v)}}),k=function(){o.fetchUserData().then(()=>{console.log("fetched user data"),c.fetchAssignments(o.levels.join(",")),console.log("fetched assignments"),u.fetchSubjectsVerbs(o.levels.join(",")).then(()=>{console.log("fetched subjects"),f.push("/")})})};return(v,y)=>(t(),l(D,null,[r(o).loading?(t(),m(h,{key:0,to:"#alerts"},[q])):n("",!0),r(c).loading?(t(),m(h,{key:1,to:"#alerts"},[E])):n("",!0),r(u).loading?(t(),m(h,{key:2,to:"#alerts"},[I])):n("",!0),g(r($),null,{header:d(()=>[M]),title:d(()=>[b("WaniKani Login")]),content:d(()=>[s("div",null,[g(r(w),{id:"txtApiKey",modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=V=>p.value=V),required:"",placeholder:"API Key V2"},null,8,["modelValue"]),g(r(B),{onClick:K(k,["prevent"])},{default:d(()=>[b("Login")]),_:1},8,["onClick"])])]),_:1})],64))}});export{z as default};
